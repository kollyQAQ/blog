## 包的init函数

每个包都可以有任意多个 init 函数，这些 init 函数都会在 main 函数之前执行。init 函数通常用来做初始化变量、设置包或者其他需要在程序执行前的引导工作。比如上面我们讲的需要使用_空标志符来导入一个包的目的，就是想执行这个包里的 init 函数。

我们以数据库的驱动为例，Go 语言为了统一关于数据库的访问，使用 databases/sql 抽象了一层数据库的操作，可以满足我们操作 MYSQL、Postgre 等数据库，这样不管我们使用这些数据库的哪个驱动，编码操作都是一样的，想换驱动的时候，就可以直接换掉，而不用修改具体的代码。

这些数据库驱动的实现，就是具体的，可以由任何人实现的，它的原理就是定义了 init 函数，在程序运行之前，把实现好的驱动注册到 sql 包里，这样我们就使用使用它操作数据库了。

```go
package mysql


import (
        "database/sql"
)


func init() {
        sql.Register("mysql", &MySQLDriver{})
}
```

因为我们只是想执行这个 mysql 包的 init 方法，并不想使用这个包，所以我们在导入这个包的时候，需要使用_重命名包名，避免编译错误。

```go
import "database/sql"
import _ "github.com/go-sql-driver/mysql"


db, err := sql.Open("mysql", "user:password@/dbname")
```

看非常简洁，剩下针对的数据库的操作，都是使用的 database/sql 标准接口，如果我们想换一个 mysql 的驱动的话，只需要换个导入就可以了，灵活方便，这也是面向接口编程的便利。