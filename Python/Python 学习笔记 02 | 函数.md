[TOC]

## 定义函数

在 Python 中，定义函数使用 `def` 语句。一个函数主要由三部分构成：

- 函数名
- 函数参数
- 函数返回值

让我们看一个简单的例子：

```python
def hello(name):
    return name

>>> r = hello('ethan')
>>> r
'ethan'
```

在上面，我们定义了一个函数。函数名是 `hello`；函数有一个参数，参数名是 name；函数有一个返回值，name。

我们也可以定义一个没有参数和返回值的函数：

```python
def greet():              # 没有参数
    print 'hello world'   # 没有 return，会自动 return None

>>> r = greet()
hello world
>>> r == None
```

这里，函数 `greet` 没有参数，它也没有返回值（或者说是 None）。

我们还可以定义返回多个值的函数：

```python
>>> def add_one(x, y, z):
...     return x+1, y+1, z+1       # 有 3 个返回值
...
>>>
>>> result = add_one(1, 5, 9)
>>> result      # result 实际上是一个 tuple
(2, 6, 10)
>>> type(result)
<type 'tuple'>
```

## 函数参数

在 Python 中，定义函数和调用函数都很简单，但如何定义函数参数和传递函数参数，则涉及到一些套路了。总的来说，Python 的函数参数主要分为以下几种：

- 必选参数
- 默认参数
- 可变参数
- 关键字参数

### 必选参数

必选参数可以说是最常见的了，顾名思义，必选参数就是在调用函数的时候要传入数量一致的参数

#### 默认参数

默认参数是指在定义函数的时候提供一些默认值，如果在调用函数的时候没有传递该参数，则自动使用默认值，否则使用传递时该参数的值

```python
>>> def add(x, y, z=1):     # x, y 是必选参数，z 是默认参数，默认值是 1
...     print x + y + z
...
>>> add(1, 2, 3)            # 1+2+3
6
>>> add(1, 2)               # 没有传递 z，自动使用 z=1，即 1+2+1
4
```

可以看到，默认参数使用起来也很简单，但有两点需要注意的是：

- 默认参数要放在所有必选参数的后面
- 默认参数应该使用不可变对象

#### 可变参数

在某些情况下，我们在定义函数的时候，无法预估函数应该制定多少个参数，这时我们就可以使用**可变参数**了，也就是，函数的参数个数是不确定的。

```python
>>> def add(*numbers):
...     sum = 0
...     for i in numbers:
...         sum += i
...     print 'numbers:', numbers
...     return sum

>>> add()           # 传递 0 个参数
numbers: ()
0
>>> add(1)          # 传递 1 个参数
numbers: (1,)
1
>>> add(1, 2)       # 传递 2 个参数
numbers: (1, 2)
3
>>> add(1, 2, 3)    # 传递 3 个参数
numbers: (1, 2, 3)
6
```

上面的 `*` 表示任意参数，实际上，它还有另外一个用法：用来给函数传递参数。

```python
>>> def add(x, y, z):        # 有 3 个必选参数
...     return x + y + z
...
>>> a = [1, 2, 3]
>>> add(a[0], a[1], a[2])    # 这样传递参数很累赘
6
>>> add(*a)                  # 使用 *a，相当于上面的做法
6
>>> b = (4, 5, 6)
>>> add(*b)                  # 对元组一样适用
15
```

#### 关键字参数

可变参数允许你将不定数量的参数传递给函数，而**关键字参数**则允许你将不定长度的**键值对** , 作为参数传递给一个函数。

```python
>>> def add(**kwargs):
    return kwargs
>>> add()            # 没有参数，kwargs 为空字典
{}
>>> add(x=1)         # x=1 => kwargs={'x': 1}
{'x': 1}
>>> add(x=1, y=2)    # x=1, y=2 => kwargs={'y': 2, 'x': 1}
{'y': 2, 'x': 1}
```

和可变参数类似，我们也可以使用 `**kwargs` 的形式来调用函数，比如：

```python
>>> def add(x, y, z):
...     return x + y + z
...
>>> dict1 = {'z': 3, 'x': 1, 'y': 6}
>>> add(dict1['x'], dict1['y'], dict1['z'])    # 这样传参很累赘
10
>>> add(**dict1)        # 使用 **dict1 来传参，等价于上面的做法
10
```

#### 参数组合

在实际的使用中，我们经常会同时用到必选参数、默认参数、可变参数和关键字参数或其中的某些。但是，需要注意的是，**它们在使用的时候是有顺序的，依次是必选参数、默认参数、可变参数和关键字参数**。

比如，定义一个包含上述四种参数的函数：

```python
>>> def func(x, y, z=0, *args, **kwargs):
    print 'x =', x
    print 'y =', y
    print 'z =', z
    print 'args =', args
    print 'kwargs =', kwargs
```

# 小结

- 如果函数没有 `return` 语句，则自动 `return None`。
- 默认参数要放在所有必选参数的后面。
- 应该使用不可变对象作为函数的默认参数。
- `*args` 表示可变参数，`**kwargs` 表示关键字参数。
- 参数组合在使用的时候是有顺序的，依次是必选参数、默认参数、可变参数和关键字参数。
- `*args` 和 `**kwargs` 是 Python 的惯用写法。